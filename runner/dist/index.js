(()=>{var e={356:e=>{var sizeOfType=function(e){if(e[0]==="U"){e=e.slice(1)}return{Float32:4,Float64:8,Int8:1,Int16:2,Int32:4,Int64:8}[e]};var endianConv=function(e,t){if(t[t.length-1]==="8")return"";if(e==="big"){return"BE"}return"LE"};var addBindings=function(t,r){if(!(typeof r!=="undefined"&&r!==null)){r=t}e.exports["pack"+t]=function(e,n){b=new Buffer(sizeOfType(t));b["write"+r+endianConv(n,t)](e,0,true);return b};e.exports["unpack"+t]=function(e,n){return e["read"+r+endianConv(n,t)](0)}};var addIntBindings=function(e){addBindings("Int"+e);addBindings("UInt"+e)};addIntBindings(8);addIntBindings(16);addIntBindings(32);twoToThe32=Math.pow(2,32);var read64=function(e){return function(t,r){var n=endianConv(r,"");var o=e?"U":"";var s,i;if(n==="LE"){s=t.readUInt32LE(0);i=t["read"+o+"Int32LE"](4)}else{s=t.readUInt32BE(4);i=t["read"+o+"Int32BE"](0)}return i*twoToThe32+s}};var write64=function(e){return function(t,r){var n=endianConv(r,"");var o=e?"U":"";var s=new Buffer(8);var i=Math.floor(t/twoToThe32);var u=Math.floor(t-i*twoToThe32);if(n=="LE"){s.writeUInt32LE(u,0,true);s["write"+o+"Int32LE"](i,4,true)}else{s.writeUInt32BE(u,4,true);s["write"+o+"Int32BE"](i,0,true)}return s}};e.exports.unpackInt64=read64(false);e.exports.unpackUInt64=read64(true);e.exports.packInt64=write64(false);e.exports.packUInt64=write64(true);addBindings("Float32","Float");addBindings("Float64","Double")},402:(e,t,r)=>{"use strict";var n=r(528);function sanitize(e){if(e instanceof Array)e=new n(e[0],...e.slice(1));return e}class Bundle{constructor(e,...t){if(!(typeof e==="number")){t.unshift(e);e=0}this.timetag=e;this.elements=t.map(sanitize)}append(e){this.elements.push(sanitize(e))}}e.exports=Bundle},613:(e,t,r)=>{"use strict";var n=r(891);var o=r(151);var s=r(528);function _interopDefaultLegacy(e){return e&&typeof e==="object"&&"default"in e?e:{default:e}}var i=_interopDefaultLegacy(o);const{toBuffer:u}=i["default"];class Client{constructor(e,t){this.host=e;this.port=t;this._sock=n.createSocket({type:"udp4",reuseAddr:true})}close(e){this._sock.close(e)}send(...e){let t=e[0];let r;if(typeof e[e.length-1]==="function"){r=e.pop()}else{r=()=>{}}if(t instanceof Array){t={address:t[0],args:t.splice(1)}}let n;let o;try{switch(typeof t){case"object":o=u(t);this._sock.send(o,0,o.length,this.port,this.host,r);break;case"string":n=new s(e[0]);for(let t=1;t<e.length;t++){n.append(e[t])}o=u(n);this._sock.send(o,0,o.length,this.port,this.host,r);break;default:throw new TypeError("That Message Just Doesn't Seem Right")}}catch(e){if(e.code!=="ERR_SOCKET_DGRAM_NOT_RUNNING")throw e;const t=new ReferenceError("Cannot send message on closed socket.");t.code=e.code;r(t)}}}e.exports=Client},528:e=>{"use strict";class Argument{constructor(e,t){this.type=e;this.value=t}}class Message{constructor(e,...t){this.oscType="message";this.address=e;this.args=t}append(e){let t;switch(typeof e){case"object":if(e instanceof Array){e.forEach((e=>this.append(e)))}else if(e.type){this.args.push(e)}else{throw new Error(`don't know how to encode object ${e}`)}break;case"number":if(Math.floor(e)===e){t=new Argument("integer",e)}else{t=new Argument("float",e)}break;case"string":t=new Argument("string",e);break;case"boolean":t=new Argument("boolean",e);break;default:throw new Error(`don't know how to encode ${e}`)}if(t)this.args.push(t)}}e.exports=Message},770:(e,t,r)=>{"use strict";var n=r(891);var o=r(361);var s=r(458);class Server extends o.EventEmitter{constructor(e,t,r){super();if(!r)r=()=>{};let o;this.port=e;this.host=t;this._sock=n.createSocket({type:"udp4",reuseAddr:true});this._sock.bind(e);this._sock.on("listening",(()=>{this.emit("listening");r()}));this._sock.on("message",((e,t)=>{try{o=s(e)}catch(e){const r=new Error(`can't decode incoming message: ${e.message}`);this.emit("error",r,t);return}if(o.elements){this.emit("bundle",o,t)}else if(o){this.emit("message",o,t);this.emit(o[0],o,t)}}))}close(e){this._sock.close(e)}}e.exports=Server},502:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(528);var o=r(402);var s=r(770);var i=r(613);t.Message=n;t.Bundle=o;t.Server=s;t.Client=i},458:(e,t,r)=>{"use strict";var n=r(151);function sanitizeMessage(e){const t=[];t.push(e.address);e.args.forEach((e=>{t.push(e.value)}));return t}function sanitizeBundle(e){e.elements=e.elements.map((e=>{if(e.oscType==="bundle")return sanitizeBundle(e);else if(e.oscType==="message")return sanitizeMessage(e)}));return e}function decode(e){const t=n.fromBuffer(e);if(t.oscType==="bundle"){return sanitizeBundle(t)}else if(t.oscType==="message"){return sanitizeMessage(t)}}e.exports=decode},151:function(e,t,r){(function(){var e,n;e=r(525);t.fromBuffer=function(t,r){if(t instanceof ArrayBuffer){t=new Buffer(new Uint8Array(t))}else if(t instanceof Uint8Array){t=new Buffer(t)}return e.fromOscPacket(t,r)};t.toBuffer=function(t,r,n){if(typeof t==="string")return e.toOscPacket({address:t,args:r},n);return e.toOscPacket(t,r)};t.applyAddressTransform=function(t,r){return e.applyTransform(t,e.addressTransform(r))};t.applyMessageTransform=function(t,r){return e.applyTransform(t,e.messageTransform(r))};t.timetagToDate=e.timetagToDate;t.dateToTimetag=e.dateToTimetag;t.timetagToTimestamp=e.timetagToTimestamp;t.timestampToTimetag=e.timestampToTimetag}).call(this)},525:function(e,t,r){(function(){var e,n,o,s,i,u,a,l,f,c,g,p,h={}.hasOwnProperty;i=r(356);t.concat=function(t){var r,n,o,s,i,u,a,l,f,c;if(!e(t)){throw new Error("concat must take an array of buffers")}for(s=0,a=t.length;s<a;s++){r=t[s];if(!Buffer.isBuffer(r)){throw new Error("concat must take an array of buffers")}}c=0;for(i=0,l=t.length;i<l;i++){r=t[i];c+=r.length}o=new Buffer(c);n=0;for(u=0,f=t.length;u<f;u++){r=t[u];r.copy(o,n);n+=r.length}return o};t.toOscString=function(e,t){var r,o,s,i;if(!(typeof e==="string")){throw new Error("can't pack a non-string into an osc-string")}s=e.indexOf("\0");if(s!==-1&&t){throw n("Can't pack an osc-string that contains NULL characters")}if(s!==-1){e=e.slice(0,s)}for(r=o=0,i=g(e);0<=i?o<i:o>i;r=0<=i?++o:--o){e+="\0"}return new Buffer(e)};t.splitOscString=function(e,t){var r,o,s,i,u,a,l,f,c;if(!Buffer.isBuffer(e)){throw n("Can't split something that isn't a buffer")}i=e.toString("utf8");s=i.indexOf("\0");if(s===-1){if(t){throw new Error("All osc-strings must contain a null character")}return{string:i,rest:new Buffer(0)}}c=i.slice(0,s);f=Buffer.byteLength(c)+g(c);if(t&&f>e.length){throw n("Not enough padding for osc-string")}if(t){for(r=o=u=Buffer.byteLength(c),a=f;u<=a?o<a:o>a;r=u<=a?++o:--o){if(e[r]!==0){throw n("Not enough or incorrect padding for osc-string")}}}l=e.slice(f,e.length);return{string:c,rest:l}};t.splitInteger=function(e,t){var r,n,o,s;if(t==null){t="Int32"}r=i["pack"+t](0).length;if(e.length<r){throw new Error("buffer is not big enough for integer type")}n=0;s=i["unpack"+t](e.slice(0,r),"big");o=e.slice(r,e.length);return{integer:s,rest:o}};t.splitTimetag=function(e){var t,r,n,o,s,u,a,l,f;f="UInt32";n=i["pack"+f](0).length;if(e.length<n*2){throw new Error("buffer is not big enough to contain a timetag")}t=0;r=n;l=i["unpack"+f](e.slice(t,r),"big");o=n;s=n+n;u=i["unpack"+f](e.slice(o,s),"big");a=e.slice(s,e.length);return{timetag:[l,u],rest:a}};s=2208988800;o=4294967296;t.dateToTimetag=function(e){return t.timestampToTimetag(e.getTime()/1e3)};t.timestampToTimetag=function(e){var t,r;r=Math.floor(e);t=e-r;return l(r,t)};t.timetagToTimestamp=function(e){var r;r=e[0]+t.ntpToFractionalSeconds(e[1]);return r-s};l=function(e,t){var r,n;n=e+s;r=Math.round(o*t);return[n,r]};t.timetagToDate=function(e){var r,n,o,i,u;u=e[0],i=e[1];u=u-s;o=t.ntpToFractionalSeconds(i);r=new Date;r.setTime(u*1e3+o*1e3);n=new Date;n.setUTCFullYear(r.getUTCFullYear());n.setUTCMonth(r.getUTCMonth());n.setUTCDate(r.getUTCDate());n.setUTCHours(r.getUTCHours());n.setUTCMinutes(r.getUTCMinutes());n.setUTCSeconds(r.getUTCSeconds());n.setUTCMilliseconds(o*1e3);return n};t.deltaTimetag=function(e,r){var n;n=(r!=null?r:new Date)/1e3;return t.timestampToTimetag(n+e)};t.ntpToFractionalSeconds=function(e){return parseFloat(e)/o};t.toTimetagBuffer=function(e){var r,n,o;if(typeof e==="number"){e=t.timestampToTimetag(e)}else if(typeof e==="object"&&"getTime"in e){e=t.dateToTimetag(e)}else if(e.length!==2){throw new Error("Invalid timetag"+e)}o="UInt32";r=i["pack"+o](e[0],"big");n=i["pack"+o](e[1],"big");return t.concat([r,n])};t.toIntegerBuffer=function(e,t){if(t==null){t="Int32"}if(typeof e!=="number"){throw new Error("cannot pack a non-number into an integer buffer")}return i["pack"+t](e,"big")};c={s:{representation:"string",split:function(e,r){var n;n=t.splitOscString(e,r);return{value:n.string,rest:n.rest}},toArg:function(e,r){if(typeof e!=="string"){throw new Error("expected string")}return t.toOscString(e,r)}},i:{representation:"integer",split:function(e,r){var n;n=t.splitInteger(e);return{value:n.integer,rest:n.rest}},toArg:function(e,r){if(typeof e!=="number"){throw new Error("expected number")}return t.toIntegerBuffer(e)}},t:{representation:"timetag",split:function(e,r){var n;n=t.splitTimetag(e);return{value:n.timetag,rest:n.rest}},toArg:function(e,r){return t.toTimetagBuffer(e)}},f:{representation:"float",split:function(e,t){return{value:i.unpackFloat32(e.slice(0,4),"big"),rest:e.slice(4,e.length)}},toArg:function(e,t){if(typeof e!=="number"){throw new Error("expected number")}return i.packFloat32(e,"big")}},d:{representation:"double",split:function(e,t){return{value:i.unpackFloat64(e.slice(0,8),"big"),rest:e.slice(8,e.length)}},toArg:function(e,t){if(typeof e!=="number"){throw new Error("expected number")}return i.packFloat64(e,"big")}},b:{representation:"blob",split:function(e,r){var n,o;o=t.splitInteger(e),n=o.integer,e=o.rest;return{value:e.slice(0,n),rest:e.slice(n,e.length)}},toArg:function(e,r){var n;if(!Buffer.isBuffer(e)){throw new Error("expected node.js Buffer")}n=t.toIntegerBuffer(e.length);return t.concat([n,e])}},T:{representation:"true",split:function(e,t){return{rest:e,value:true}},toArg:function(e,t){if(!e&&t){throw new Error("true must be true")}return new Buffer(0)}},F:{representation:"false",split:function(e,t){return{rest:e,value:false}},toArg:function(e,t){if(e&&t){throw new Error("false must be false")}return new Buffer(0)}},N:{representation:"null",split:function(e,t){return{rest:e,value:null}},toArg:function(e,t){if(e&&t){throw new Error("null must be false")}return new Buffer(0)}},I:{representation:"bang",split:function(e,t){return{rest:e,value:"bang"}},toArg:function(e,t){return new Buffer(0)}}};t.oscTypeCodeToTypeString=function(e){var t;return(t=c[e])!=null?t.representation:void 0};t.typeStringToOscTypeCode=function(e){var t,r;for(t in c){if(!h.call(c,t))continue;r=c[t].representation;if(r===e){return t}}return null};t.argToTypeCode=function(e,r){var n,o;if((e!=null?e.type:void 0)!=null&&typeof e.type==="string"&&(n=t.typeStringToOscTypeCode(e.type))!=null){return n}o=(e!=null?e.value:void 0)!=null?e.value:e;if(r&&o==null){throw new Error("Argument has no value")}if(typeof o==="string"){return"s"}if(typeof o==="number"){return"f"}if(Buffer.isBuffer(o)){return"b"}if(typeof o==="boolean"){if(o){return"T"}else{return"F"}}if(o===null){return"N"}throw new Error("I don't know what type this is supposed to be.")};t.splitOscArgument=function(e,r,n){var o;o=t.typeStringToOscTypeCode(r);if(o!=null){return c[o].split(e,n)}else{throw new Error("I don't understand how I'm supposed to unpack "+r)}};t.toOscArgument=function(e,r,n){var o;o=t.typeStringToOscTypeCode(r);if(o!=null){return c[o].toArg(e,n)}else{throw new Error("I don't know how to pack "+r)}};t.fromOscMessage=function(e,r){var o,s,i,u,a,l,f,c,g,p,h,d;c=t.splitOscString(e,r),o=c.string,e=c.rest;if(r&&o[0]!=="/"){throw n("addresses must start with /")}if(!e.length){return{address:o,args:[]}}g=t.splitOscString(e,r),d=g.string,e=g.rest;if(d[0]!==","){if(r){throw n("Argument lists must begin with ,")}return{address:o,args:[]}}d=d.slice(1,+d.length+1||9e9);i=[];u=[i];for(l=0,f=d.length;l<f;l++){p=d[l];if(p==="["){u.push([]);continue}if(p==="]"){if(u.length<=1){if(r){throw new n("Mismatched ']' character.")}}else{a=u.pop();u[u.length-1].push({type:"array",value:a})}continue}h=t.oscTypeCodeToTypeString(p);if(h==null){throw new Error("I don't understand the argument code "+p)}s=t.splitOscArgument(e,h,r);if(s!=null){e=s.rest}u[u.length-1].push({type:h,value:s!=null?s.value:void 0})}if(u.length!==1&&r){throw new n("Mismatched '[' character")}return{address:o,args:i,oscType:"message"}};t.fromOscBundle=function(e,r){var n,o,s,i,u;s=t.splitOscString(e,r),n=s.string,e=s.rest;if(n!=="#bundle"){throw new Error("osc-bundles must begin with #bundle")}i=t.splitTimetag(e),u=i.timetag,e=i.rest;o=f(e,(function(e){return t.fromOscPacket(e,r)}));return{timetag:u,elements:o,oscType:"bundle"}};t.fromOscPacket=function(e,r){if(a(e,r)){return t.fromOscBundle(e,r)}else{return t.fromOscMessage(e,r)}};u=function(t){if(e(t)){return t}else if((t!=null?t.type:void 0)==="array"&&e(t!=null?t.value:void 0)){return t.value}else if(t!=null&&t.type==null&&e(t.value)){return t.value}else{return null}};p=function(e,r){var n,o,s,i,a,l,f,c,g,h,d;l="";a=[];for(s=0,i=e.length;s<i;s++){n=e[s];if(u(n)!=null){f=p(u(n),r),g=f[0],c=f[1];l+="["+g+"]";a=a.concat(c);continue}h=t.argToTypeCode(n,r);if(h!=null){d=n!=null?n.value:void 0;if(d===void 0){d=n}o=t.toOscArgument(d,t.oscTypeCodeToTypeString(h),r);if(o!=null){a.push(o);l+=h}}}return[l,a]};t.toOscMessage=function(r,n){var o,s,i,u,a,l,f,c;o=(r!=null?r.address:void 0)!=null?r.address:r;if(typeof o!=="string"){throw new Error("message must contain an address")}i=r!=null?r.args:void 0;if(i===void 0){i=[]}if(!e(i)){u=i;i=[];i[0]=u}a=t.toOscString(o,n);c=p(i,n),f=c[0],l=c[1];f=","+f;s=t.concat(l);f=t.toOscString(f);return t.concat([a,f,s])};t.toOscBundle=function(r,o){var s,i,u,a,l,f,c,g,p,h,d,m,w,v,T;if(o&&(r!=null?r.timetag:void 0)==null){throw n("bundles must have timetags.")}T=(m=r!=null?r.timetag:void 0)!=null?m:new Date;l=(w=r!=null?r.elements:void 0)!=null?w:[];if(!e(l)){f=l;l=[];l.push(f)}p=t.toOscString("#bundle");d=t.toTimetagBuffer(T);h=[];for(c=0,g=l.length;c<g;c++){a=l[c];try{i=t.toOscPacket(a,o);v=t.toIntegerBuffer(i.length);h.push(t.concat([v,i]))}catch(e){u=e;null}}s=t.concat(h);return t.concat([p,d,s])};t.toOscPacket=function(e,r){if((e!=null?e.oscType:void 0)!=null){if(e.oscType==="bundle"){return t.toOscBundle(e,r)}return t.toOscMessage(e,r)}if((e!=null?e.timetag:void 0)!=null||(e!=null?e.elements:void 0)!=null){return t.toOscBundle(e,r)}return t.toOscMessage(e,r)};t.applyMessageTranformerToBundle=function(e){return function(r){var n,o,s,i,u,a,l,c,g,p,h,d,m,w;h=t.splitOscString(r),d=h.string,r=h.rest;if(d!=="#bundle"){throw new Error("osc-bundles must begin with #bundle")}n=t.toOscString(d);m=r.slice(0,8);r=r.slice(8,r.length);i=f(r,(function(r){return t.applyTransform(r,e,t.applyMessageTranformerToBundle(e))}));w=n.length+m.length;for(u=0,l=i.length;u<l;u++){s=i[u];w+=4+s.length}p=new Buffer(w);n.copy(p,0);m.copy(p,n.length);o=n.length+m.length;for(a=0,c=i.length;a<c;a++){s=i[a];g=t.toIntegerBuffer(s.length);g.copy(p,o);o+=4;s.copy(p,o);o+=s.length}return p}};t.applyTransform=function(e,r,n){if(n==null){n=t.applyMessageTranformerToBundle(r)}if(a(e)){return n(e)}else{return r(e)}};t.addressTransform=function(e){return function(r){var n,o,s;n=t.splitOscString(r),s=n.string,o=n.rest;s=e(s);return t.concat([t.toOscString(s),o])}};t.messageTransform=function(e){return function(r){var n;n=t.fromOscMessage(r);return t.toOscMessage(e(n))}};e=Array.isArray;n=function(e){return new Error("Strict Error: "+e)};g=function(e){var t;t=Buffer.byteLength(e);return 4-t%4};a=function(e,r){var n;n=t.splitOscString(e,r).string;return n==="#bundle"};f=function(e,r){var n,o,s,i,u,a,l,f;s=function(){var o,s;s=[];while(e.length){o=t.splitInteger(e),l=o.integer,e=o.rest;if(l>e.length){throw new Error("Invalid bundle list: size of element is bigger than buffer")}f=e.slice(0,l);e=e.slice(l,e.length);try{s.push(r(f))}catch(e){n=e;s.push(null)}}return s}();a=[];for(i=0,u=s.length;i<u;i++){o=s[i];if(o!=null){a.push(o)}}return a}}).call(this)},891:e=>{"use strict";e.exports=require("dgram")},361:e=>{"use strict";e.exports=require("events")}};var t={};function __nccwpck_require__(r){var n=t[r];if(n!==undefined){return n.exports}var o=t[r]={exports:{}};var s=true;try{e[r].call(o.exports,o,o.exports,__nccwpck_require__);s=false}finally{if(s)delete t[r]}return o.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var r={};(()=>{"use strict";var e=r;Object.defineProperty(e,"__esModule",{value:true});const t=__nccwpck_require__(502);const main=async()=>{const e=new t.Client("host.docker.internal",9e3);while(true){const r=new t.Message("/input/Horizontal",1);e.send(r,(()=>{console.log("sent","/input/Horizontal")}));await new Promise((e=>setTimeout(e,100)))}e.send("/input/MoveForward",["2"],(()=>{e.close()}))};main()})();module.exports=r})();